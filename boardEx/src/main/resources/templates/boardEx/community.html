<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ìë™ì˜ˆë§¤ - ì»¤ë®¤ë‹ˆí‹°</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<!-- Favicons -->
<link href="/assets/img/thunder_icon.png" rel="icon">
<style>
/* ===== ì»¤ë®¤ë‹ˆí‹° ê²€ìƒ‰ ===== */
.search-box {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    /* background: white; */
    padding: 0.6rem;
    border-radius: 14px;
    /* box-shadow: 0 2px 2px rgba(0,0,0,0.06); */
}

.search-select {
    height: 42px;
    padding: 0 0.75rem;
    border-radius: 10px;
    border: 1px solid var(--border);
    font-size: 0.9rem;
    cursor: pointer;
    background: #fff;
}

.search-input {
    flex: 1;
    height: 42px;
    padding: 0 1rem;
    border-radius: 10px;
    border: 1px solid var(--border);
    font-size: 0.95rem;
    outline: none;
}

.search-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99,102,241,0.15);
}

.search-btn {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    border: none;
    background: var(--primary);
    color: white;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.25s ease;
}

.search-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: 0 6px 15px rgba(99,102,241,0.4);
}

/* ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 640px) {
    .search-box {
        flex-direction: column;
        align-items: stretch;
    }

    .search-btn {
        width: 100%;
    }
}
/* ================= Pagination ================= */
	.pagination-wrapper {
	    display: flex;
	    justify-content: center;
	    align-items: center;
	    gap: 0.6rem;
	    margin-top: 3rem;
	    flex-wrap: wrap;
	}
	
	.page-btn {
	    min-width: 42px;
	    height: 42px;
	    padding: 0 14px;
	    border-radius: 12px;
	    border: 1px solid var(--border);
	    background: white;
	    color: var(--dark);
	    font-size: 0.95rem;
	    font-weight: 600;
	    display: inline-flex;
	    align-items: center;
	    justify-content: center;
	    cursor: pointer;
	    text-decoration: none;
	    transition: all 0.25s ease;
	}
	
	.page-btn:hover {
	    background: var(--primary);
	    color: #fff;
	    border-color: var(--primary);
	    transform: translateY(-2px);
	    box-shadow: 0 8px 18px rgba(99,102,241,0.35);
	}
	
	.page-btn.active {
	    background: var(--primary);
	    color: white;
	    border-color: var(--primary);
	    cursor: default;
	    box-shadow: 0 10px 25px rgba(99,102,241,0.45);
	}
	
	.page-btn.prev,
	.page-btn.next {
	    font-size: 1.25rem;
	    font-weight: 700;
	}
	
	@media (max-width: 480px) {
	    .page-btn {
	        min-width: 36px;
	        height: 36px;
	        font-size: 0.85rem;
	    }
	}


    .modal-footer .btn-outline {
	  border-color: var(--primary);
	  color: var(--primary);
	}
	
	.modal-footer .btn-outline:hover {
	  background: var(--primary);
	  color: white;
	}
	
	/* =====modal ìŠ¤íƒ€ì¼=====  */
	
       .modal {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           align-items: center;
           justify-content: center;
           padding: 1rem;
       }

       .modal.active {
           display: flex;
       }

       .modal-content {
           background: white;
           border-radius: 12px;
           max-width: 800px;
           width: 100%;
           max-height: 90vh;
           overflow-y: auto;
           box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
       }

       .modal-header {
           padding: 1.5rem;
           border-bottom: 1px solid var(--border);
       }

       .modal-title {
           font-size: 1.25rem;
           font-weight: 600;
           margin-bottom: 0.25rem;
       }

       .modal-body {
           padding: 1.5rem;
       }

       .modal-footer {
           padding: 1.5rem;
           border-top: 1px solid var(--border);
           display: flex;
           gap: 0.5rem;
           justify-content: flex-end;
       }
	
   
       
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       :root {
           --primary: #6366f1;
           --primary-dark: #4f46e5;
           --secondary: #8b5cf6;
           --success: #10b981;
           --warning: #f59e0b;
           --danger: #ef4444;
           --dark: #1e293b;
           --gray: #64748b;
           --light-gray: #f1f5f9;
           --border: #e2e8f0;
       }

       body {
           font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
           color: var(--dark);
           line-height: 1.6;
           background: #f8fafc;
       }

       /* Header & Navigation */
       header {
           background: white;
           box-shadow: 0 2px 10px rgba(0,0,0,0.05);
           position: sticky;
           top: 0;
           z-index: 1000;
       }

       nav {
           max-width: 1200px;
           margin: 0 auto;
           padding: 0 1.5rem;
           display: flex;
           justify-content: space-between;
           align-items: center;
           height: 70px;
       }

       .logo {
           display: flex;
           align-items: center;
           gap: 0.75rem;
           font-size: 1.5rem;
           font-weight: 700;
           color: var(--primary);
           text-decoration: none;
       }

       .logo-icon {
           width: 40px;
           height: 40px;
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           border-radius: 10px;
           display: flex;
           align-items: center;
           justify-content: center;
           color: white;
       }

       .nav-menu {
           display: flex;
           list-style: none;
           gap: 2rem;
           align-items: center;
       }

       .nav-menu a {
           text-decoration: none;
           color: var(--dark);
           font-weight: 500;
           transition: color 0.3s;
           position: relative;
       }

       .nav-menu a:hover {
           color: var(--primary);
       }

       .nav-menu a.active::after {
           content: '';
           position: absolute;
           bottom: -8px;
           left: 0;
           right: 0;
           height: 3px;
           background: var(--primary);
           border-radius: 3px;
       }

       .mobile-menu-btn {
           display: none;
           background: none;
           border: none;
           font-size: 1.5rem;
           cursor: pointer;
           color: var(--dark);
       }

       /* Hero Section */
       .hero {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
           padding: 5rem 1.5rem;
           text-align: center;
       }

       .hero-content {
           max-width: 800px;
           margin: 0 auto;
       }

       .hero h1 {
           font-size: 3rem;
           margin-bottom: 1rem;
           line-height: 1.2;
       }

       .hero p {
           font-size: 1.25rem;
           margin-bottom: 2rem;
           opacity: 0.95;
       }

       .hero-buttons {
           display: flex;
           gap: 1rem;
           justify-content: center;
           flex-wrap: wrap;
       }

       .btn {
           padding: 0.875rem 2rem;
           border: 1px solid var(--primary);
           border-radius: 10px;
           font-size: 1rem;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.3s;
           text-decoration: none;
           display: inline-flex;
           align-items: center;
           gap: 0.5rem;
           
       }
       
       .btn-modal {
           padding: 0.75rem 1.5rem;
           border: none;
           border-radius: 8px;
           font-size: 0.875rem;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.2s;
           display: inline-flex;
           align-items: center;
           gap: 0.5rem;
           width: 100%;
           justify-content: center;
       }

       .btn-primary {
           background: white;
           color: var(--primary);
       }

       .btn-primary:hover {
           transform: translateY(-2px);
           box-shadow: 0 10px 30px rgba(255,255,255,0.3);
       }

       .btn-outline {
           background: transparent;
           border: 2px solid white;
           color: black;
       }

       .btn-outline:hover {
           background: rgba(255,255,255,0.1);
       }

       /* Container */
       .container {
           max-width: 1200px;
           margin: 0 auto;
           padding: 0 1.5rem;
       }

       .section {
           padding: 4rem 0;
       }

       .section-title {
           text-align: center;
           font-size: 2.5rem;
           margin-bottom: 1rem;
           color: var(--dark);
       }

       .section-subtitle {
           text-align: center;
           font-size: 1.125rem;
           color: var(--gray);
           margin-bottom: 3rem;
       }

       /* Features Grid */
       .features-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
           gap: 2rem;
           margin-top: 3rem;
       }

       .feature-card {
           background: white;
           padding: 2rem;
           border-radius: 15px;
           box-shadow: 0 4px 6px rgba(0,0,0,0.05);
           transition: all 0.3s;
           text-align: center;
           /* position: relative; */
       }

       .feature-card:hover {
           transform: translateY(-5px);
           box-shadow: 0 10px 25px rgba(0,0,0,0.1);
       }

       .feature-icon {
           width: 70px;
           height: 70px;
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           border-radius: 15px;
           display: flex;
           align-items: center;
           justify-content: center;
           font-size: 2rem;
           margin: 0 auto 1.5rem;
           color: white;
       }

       .feature-card h3 {
           font-size: 1.5rem;
           margin-bottom: 1rem;
       }

       .feature-card p {
           color: var(--gray);
           line-height: 1.7;
       }
       
       .post-no {
      	  	position: absolute;
	    top: 5px;
	    left: 5px;
	    background: var(--primary);
	    color: white;
	    font-size: 0.875rem;
	    font-weight: 700;
	    padding: 4px 10px;
	    border-radius: 999px;
	    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
       }

       /* Popular Scripts */
       .scripts-grid {
           display: grid;
           grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
           gap: 2rem;
       }

       .script-card {
           background: white;
           border-radius: 15px;
           overflow: hidden;
           box-shadow: 0 4px 6px rgba(0,0,0,0.05);
           transition: all 0.3s;
           position: relative;
       }

       .script-card:hover {
           transform: translateY(-5px);
           box-shadow: 0 15px 35px rgba(0,0,0,0.1);
       }

       .script-badge {
           position: absolute;
           top: 1rem;
           right: 1rem;
           background: linear-gradient(135deg, #f59e0b, #ef4444);
           color: white;
           padding: 0.375rem 0.875rem;
           border-radius: 20px;
           font-size: 0.875rem;
           font-weight: 600;
           z-index: 10;
       }

       .script-header {
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           padding: 2rem;
           color: white;
           position: relative;
       }

       .script-header h3 {
           font-size: 1.75rem;
           margin-bottom: 0.5rem;
       }

       .script-header p {
           opacity: 0.9;
           font-size: 0.95rem;
       }

       .script-body {
           padding: 1.5rem;
       }

       .script-tags {
           display: flex;
           gap: 0.5rem;
           margin-bottom: 1rem;
           flex-wrap: wrap;
       }

       .tag {
           padding: 0.375rem 0.875rem;
           border-radius: 20px;
           font-size: 0.875rem;
           font-weight: 500;
       }

       .tag-transport {
           background: rgba(59, 130, 246, 0.1);
           color: #2563eb;
       }

       .tag-ticket {
           background: rgba(168, 85, 247, 0.1);
           color: #7c3aed;
       }

       .tag-easy { background: rgba(16, 185, 129, 0.1); color: #059669; }
       .tag-medium { background: rgba(245, 158, 11, 0.1); color: #d97706; }
       .tag-hard { background: rgba(239, 68, 68, 0.1); color: #dc2626; }

       .script-features {
           list-style: none;
           margin: 1rem 0;
       }

       .script-features li {
           padding: 0.5rem 0;
           padding-left: 1.5rem;
           position: relative;
           color: var(--gray);
           font-size: 0.95rem;
       }

       .script-features li::before {
           content: 'âœ“';
           position: absolute;
           left: 0;
           color: var(--success);
           font-weight: bold;
       }

       .script-footer {
           padding: 1rem 1.5rem;
           border-top: 1px solid var(--border);
           display: flex;
           gap: 0.5rem;
       }

       .btn-full {
           width: 100%;
           justify-content: center;
       }

       .btn-secondary {
           background: var(--primary);
           color: white;
       }

       .btn-secondary:hover {
           background: var(--primary-dark);
       }

       /* Stats Section */
       .stats {
           background: var(--dark);
           color: white;
           padding: 4rem 0;
           text-align: center;
       }

       .stats-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
           gap: 3rem;
           margin-top: 2rem;
       }

       .stat-item h3 {
           font-size: 3rem;
           margin-bottom: 0.5rem;
           background: linear-gradient(135deg, #667eea, #764ba2);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
       }

       .stat-item p {
           font-size: 1.125rem;
           opacity: 0.8;
       }

       /* How It Works */
       .steps {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
           gap: 2rem;
           margin-top: 3rem;
       }

       .step {
           text-align: center;
           position: relative;
       }

       .step-number {
           width: 60px;
           height: 60px;
           background: linear-gradient(135deg, var(--primary), var(--secondary));
           color: white;
           border-radius: 50%;
           display: flex;
           align-items: center;
           justify-content: center;
           font-size: 1.75rem;
           font-weight: 700;
           margin: 0 auto 1.5rem;
       }

       .step h3 {
           font-size: 1.25rem;
           margin-bottom: 0.75rem;
       }

       .step p {
           color: var(--gray);
       }

       /* CTA Section */
       .cta {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
           padding: 5rem 1.5rem;
           text-align: center;
           border-radius: 20px;
           margin: 4rem 0;
       }

       .cta h2 {
           font-size: 2.5rem;
           margin-bottom: 1rem;
       }

       .cta p {
           font-size: 1.25rem;
           margin-bottom: 2rem;
           opacity: 0.95;
       }

       /* Footer */
       footer {
           background: var(--dark);
           color: white;
           padding: 3rem 0 1.5rem;
       }

       .footer-content {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
           gap: 3rem;
           margin-bottom: 2rem;
       }

       .footer-section h4 {
           margin-bottom: 1rem;
           font-size: 1.25rem;
       }

       .footer-section ul {
           list-style: none;
       }

       .footer-section ul li {
           margin-bottom: 0.5rem;
       }

       .footer-section a {
           color: rgba(255,255,255,0.7);
           text-decoration: none;
           transition: color 0.3s;
       }

       .footer-section a:hover {
           color: white;
       }

       .footer-bottom {
           border-top: 1px solid rgba(255,255,255,0.1);
           padding-top: 1.5rem;
           text-align: center;
           color: rgba(255,255,255,0.6);
       }

       /* Alert */
       .alert {
           padding: 1.25rem;
           border-radius: 10px;
           margin: 2rem 0;
       }

       .alert-warning {
           background: rgba(245, 158, 11, 0.1);
           border: 1px solid rgba(245, 158, 11, 0.3);
           color: #92400e;
       }

       .alert-title {
           font-weight: 600;
           margin-bottom: 0.5rem;
           font-size: 1.125rem;
       }

       .alert ul {
           padding-left: 1.5rem;
           margin-top: 0.5rem;
       }

       .alert li {
           margin: 0.25rem 0;
       }

       /* Page Content (for other pages) */
       .page-content {
           display: none;
       }

       .page-content.active {
           display: block;
       }

       /* Responsive */
       @media (max-width: 768px) {
           .nav-menu {
               position: fixed;
               top: 70px;
               left: -100%;
               width: 100%;
               height: calc(100vh - 70px);
               background: white;
               flex-direction: column;
               padding: 2rem;
               transition: left 0.3s;
               box-shadow: 0 4px 6px rgba(0,0,0,0.1);
           }

           .nav-menu.active {
               left: 0;
           }

           .mobile-menu-btn {
               display: block;
           }

           .hero h1 {
               font-size: 2rem;
           }

           .hero p {
               font-size: 1rem;
           }

           .section-title {
               font-size: 2rem;
           }

           .scripts-grid {
               grid-template-columns: 1fr;
           }
       }

       /* Loading Animation */
       @keyframes fadeIn {
           from {
               opacity: 0;
               transform: translateY(20px);
           }
           to {
               opacity: 1;
               transform: translateY(0);
           }
       }

       .fade-in {
           animation: fadeIn 0.6s ease-out;
       }
       
       .scroll-top {
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 48px;
    height: 48px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    z-index: 9999;

    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s, transform 0.3s;
}

.scroll-top.show {
    opacity: 1;
    pointer-events: auto;
}

.scroll-top:hover {
    transform: translateY(-3px);
}
</style>
</head>
<body>

<!-- header -->
<div th:replace="~{boardEx/header :: header}"></div>

<section class="section" style="padding-top: 3rem;">
    <div class="container">
        <h1 class="section-title">ì»¤ë®¤ë‹ˆí‹°</h1>
        <p class="section-subtitle">ì‚¬ì´íŠ¸ ì¶”ì²œ ë° ê²½í—˜ ê³µìœ </p>

        <div style="max-width: 800px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h3>ì¶”ì²œ ìš”ì²­ ê²Œì‹œíŒ</h3>
                <form action="/boardEx/community" method="get" class="search-box">
                	<div class="text-center">
					    <select name="type" class="search-select">
					        <option value="T">ì œëª©</option>
					        <option value="C">ë‚´ìš©</option>
					        <option value="W">ì‘ì„±ì</option>
					    </select>
					
					    <input type="text"
					           name="keyword"
					           class="search-input"
					           placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
					           
					    <input class="search-btn" type="submit" value="ê²€ìƒ‰">
				    </div>
				</form>
                
                <button class="btn btn-primary"
				        th:data-login="${session.loginId != null}"
				        onclick="goComRegister(this)">
				    + ì‚¬ì´íŠ¸ ì¶”ì²œí•˜ê¸°
				</button>

            </div>
            
            <div class="community-count-box">
			    <span class="count-title">ğŸ“Œ ê²Œì‹œê¸€</span>
			    <span class="count-number" th:text="${paging.total}"></span>
			    <span class="count-unit">ê°œ</span>
			
			    <span class="count-sub">
			        (í˜„ì¬ í˜ì´ì§€ <b th:text="${#lists.size(list)}"></b>ê°œ)
			    </span>
			</div>
			
            <!-- ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ -->
            <div id="communityPosts">

                <!-- ê²Œì‹œê¸€ 1 -->
                <div  th:each="post:${list}"
                	  th:object="${post}"
                	  th:onclick="|location.href='@{/boardEx/comRead(
                	  				  postId=*{postId}
                	  				, pageNum=${criteria.pageNum}
                	  				, amount=${criteria.amount}
                	  				, type=${criteria.type}
                	  				, keyword=${criteria.keyword}
               	  				 )}'|"	
               		  class="feature-card" style="text-align:left; margin-bottom:1.5rem;">
                	<!-- ê²Œì‹œê¸€ ë²ˆí˜¸  -->
                	<span class="post-no" th:text="${post.postId}"></span> <!-- ì¶”í›„ th:text="${post.no}ë¡œ ë³€ê²½ -->
                
                    <div style="margin-bottom:1rem;">
                        <div style="display:flex; gap:0.5rem; align-items:center; margin-bottom:0.5rem;">
                            <h3 th:text="${post.title}" style="margin:0;"></h3>
                            <span class="tag tag-ticket" th:text="${post.ticket}"></span>
                            <span class="tag" th:text="${post.category}" style="background:rgba(245,158,11,0.1); color:#d97706;"></span>
                            <!-- ê´€ë¦¬ìì¸ ê²½ìš° -->
                            <select th:if="${session.loginName == 'í‘œê¸°í›ˆ' or session.loginName == 'ì´ì¥ìš±'}"
                            		class="tag"
                            		onclick="event.stopPropagation()"
                            		th:onchange="|updateCategory(${post.postId}, this.value)|"
                            		 style="background:#fff; border:1px solid #e5e7eb; cursor:pointer;">
                            	<option value="ê²€í† ì¤‘" th:selected="${post.category == 'ê²€í† ì¤‘'}">ê²€í† ì¤‘</option>
					    		<option value="ìŠ¹ì¸"   th:selected="${post.category == 'ìŠ¹ì¸'}">ìŠ¹ì¸</option>
					    		<option value="ë°˜ë ¤"   th:selected="${post.category == 'ë°˜ë ¤'}">ë°˜ë ¤</option>
                            </select>
                        </div>
                        
                        <p th:text="${post.content}" style="color:var(--gray); margin-bottom:0.75rem;"></p>
                        <p style="font-size:0.875rem; color:var(--gray);">
                            ğŸ‘¤ <span th:text="${post.author}"></span>
                            â€¢ <span th:if="${post.updatedAt != null}" style="font-weight:600;">(ìˆ˜ì •ë¨)</span>
							  <span th:text="${#temporals.format(post.updatedAt != null ? post.updatedAt : post.createdAt, 'yyyy-MM-dd')}"></span>

                        </p>
                    </div>
                    <div style="display:flex; gap:0.75rem; padding-top:1rem; border-top:1px solid var(--border);">
                        <button class="btn btn-outline" 
                        		th:onclick="event.stopPropagation(); likePost([[${post.postId}]])" 
                        		style="padding:0.5rem 1rem;">
                            ğŸ‘ <span th:id="|post-likes-${post.postId}|"
                            		 th:text="${post.likes}"></span>
                        </button>
                        <!-- ì¶”í›„ ë°˜ì˜ ì˜ˆì •(2026.1.7 ë°˜ì˜ì™„ë£Œ) -->
                        <button class="btn btn-outline"
                        		style="padding:0.5rem 1rem;"
                        		th:onclick="event.stopPropagation(); goToComments([[${post.postId}]])" 
                         >
                            ğŸ’¬ <span th:text="${post.comments}"></span>
                        </button>
                    </div>
                </div>
            </div>
			<!-- í˜ì´ì§• + ê²€ìƒ‰ ê¸°ëŠ¥  -->
			<div class="pagination-wrapper" th:object="${paging}">
				<div style="text-align: center;">
					<a class="page-btn prev changePage" th:if="*{prev}" th:href="${paging.startPage-1}">&lt;</a>
					<th:block th:each="num : ${#numbers.sequence(paging.getStartPage(), paging.getEndPage())}">
						<span class="page-btn active"
							  th:if="${paging.criteria.getPageNum() == num}" 
							  th:text="${num}">
						</span>
						
						<a class="page-btn changePage" 
						   th:unless="${paging.criteria.getPageNum() == num}" 
						   th:href="${num}"
						   th:text="${num}">
						</a>
														
					</th:block>
					
					<a class="page-btn next changePage" 
					   th:if="*{next}" 
					   th:href="${paging.endPage+1}">
					   &gt;
				    </a>
				</div>
				<form name="pageForm" action="/boardEx/community" th:object="${criteria}">
					<!-- th:fieldëŠ” form ì „ìš©, th:textì™€ í•„ë“œëª…ë§Œ ì“¸ ìˆ˜ ìˆë‹¤  -->
					<input type="hidden" name="pageNum" th:field="*{pageNum}" />
					<input type="hidden" name="amount" th:field="*{amount}"/>
					
					<!-- ê²€ìƒ‰ ìœ ì§€ -->
					<input type="hidden" name="type" th:field="*{type}" />
					<input type="hidden" name="keyword" th:field="*{keyword}" />
				</form>
			</div>         
        </div>
    </div>
</section>

<!-- âœ… Disclaimer Modal (footer ë°–ì— ìˆì–´ì•¼ í•¨) -->
<div id="disclaimerModal" class="modal" aria-hidden="true">
  <div class="modal-content" style="color: #1e293b;">
    <div class="modal-header">
      <h2 class="modal-title">âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ë©´ì±…ì¡°í•­</h2>
      <p class="subtitle">ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ì „ ë°˜ë“œì‹œ í™•ì¸í•´ì£¼ì„¸ìš”</p>
    </div>

    <div class="modal-body">
      <ul style="padding-left: 1.5rem; font-size: 0.875rem;">
        <li>ë³¸ ìŠ¤í¬ë¦½íŠ¸ëŠ” êµìœ¡ ë° ì°¸ê³  ëª©ì ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤</li>
        <li>ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ëª¨ë“  ì±…ì„ì€ ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤</li>
        <li>ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì„œë²„ ë¶€í•˜ ë° IP ì°¨ë‹¨ì— ìœ ì˜í•˜ì„¸ìš”</li>
        <li>ê° ì‚¬ì´íŠ¸ì˜ ì´ìš©ì•½ê´€ì„ ì¤€ìˆ˜í•˜ë©° ì‚¬ìš©í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤</li>
        <li>ì˜ˆë§¤ ì„±ê³µì„ ë³´ì¥í•˜ì§€ ì•Šìœ¼ë©°, ì‹¤ì œ ì˜ˆë§¤ëŠ” í•´ë‹¹ ì‚¬ì´íŠ¸ ì •ì±…ì— ë”°ë¦…ë‹ˆë‹¤</li>
      </ul>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn-modal btn-outline" data-close>ë‹«ê¸°</button>
    </div>
  </div>
</div>

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<!-- footer -->
<div th:replace="~{boardEx/footer :: footer}"></div>
</body>
<script type="text/javascript">
	const scrollTopBtn = document.getElementById("scroll-top");
	//ìŠ¤í¬ë¡¤ ì‹œ ë²„íŠ¼ í‘œì‹œ
	window.addEventListener("scroll", () => {
	if (window.scrollY > 300) {
	  scrollTopBtn.classList.add("show");
	} else {
	  		scrollTopBtn.classList.remove("show");
		}
	});
	
	//í´ë¦­ ì‹œ ë§¨ ìœ„ë¡œ ì´ë™
	scrollTopBtn.addEventListener("click", (e) => {
		e.preventDefault();
		window.scrollTo({
		  top: 0,
		  behavior: "smooth"
		});
	});
	
	// Community Functions
	function createPost() {
	    const author = prompt('ì‘ì„±ì ì´ë¦„:');
	    if (!author) return;
	    
	    const siteName = prompt('ì¶”ì²œ ì‚¬ì´íŠ¸ëª…:');
	    if (!siteName) return;
	    
	    const description = prompt('ì„¤ëª… (ì™œ í•„ìš”í•œì§€):');
	    if (!description) return;
	    
	    alert('âœ… ì‚¬ì´íŠ¸ ì¶”ì²œì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!\nê²€í†  í›„ ìŠ¹ì¸ë©ë‹ˆë‹¤.');
	    loadCommunityPosts();
	}
	
	function likePost(postId) {
	    fetch("/boardEx/community/like", {
	        method: "POST",
	        headers: {
	            "Content-Type": "application/x-www-form-urlencoded"
	        },
	        body: `postId=${postId}`
	    })
	    .then(res => res.text())
	    .then(newLikes => {
	        document.getElementById(`post-likes-${postId}`).textContent = newLikes;
	    })
	    .catch(err => console.error("like error:", err));
	}
	
	/* ==========ë©´ì±…ì‚¬í•­ ëª¨ë‹¬ì°½======== */
	console.log('ğŸ”¥ modal js loaded');

	document.addEventListener('click', function (e) {

	  const openTarget = e.target.closest('[data-modal]');
	  if (openTarget) {
	    e.preventDefault();
	    console.log('âœ… disclaimer click detected');

	    const modalId = openTarget.dataset.modal + 'Modal';
	    const modal = document.getElementById(modalId);

	    console.log('modalId:', modalId);
	    console.log('modal element:', modal);

	    if (modal) modal.classList.add('active');
	    return;
	  }

	  if (
	    e.target.matches('[data-close]') ||
	    e.target.classList.contains('modal')
	  ) {
	    const modal = e.target.closest('.modal');
	    if (modal) modal.classList.remove('active');
	  }
	});
	/* ========ëª¨ë‹¬ì°½ ë==================  */
	
function goComRegister(btn) {
  const isLogin = btn.dataset.login === "true";

  if (!isLogin) {
    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    location.href = "/boardEx/login";
    return;
  }

  location.href = "/boardEx/comRegister";
}

function updateCategory(postId, category) {
    if (!confirm("ì¹´í…Œê³ ë¦¬ë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

    fetch("/boardEx/updateCategory", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded"
        },
        body: `postId=${postId}&category=${category}`
    })
    .then(res => res.text())
    .then(msg => {
        alert(msg);
    })
    .catch(err => {
        console.error(err);
        alert("ì¹´í…Œê³ ë¦¬ ë³€ê²½ ì‹¤íŒ¨");
    });
}

function goToComments(postId) {
    location.href = `/boardEx/comRead?postId=${postId}#commentSection`;
}
</script>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script th:inline="javascript">
	$("a.changePage").click(function(e){
		// í´ë¦­í•´ë„ ì´ë²¤íŠ¸ ë°œìƒ ì•ˆí•˜ê²Œ í•¨
		e.preventDefault();
		// í˜„ì¬ ëˆ„ë¥¸ í˜ì´ì§€ ë²ˆí˜¸ í˜ì´ì§€ ë²ˆí˜¸ì— ì„¸íŒ…
		let pageForm = $(document.pageForm); // nameì´ pageFormì¸ ê²ƒì„ ê°€ì ¸ì˜´
		pageForm.find("input[name='pageNum']").val($(this).attr("href"));
		// ì œì¶œ
		pageForm.submit();
	});
</script>
<script th:inline="javascript">
var msg = [[${msg}]];
if(msg){
	alert(msg);
}
</script>
<script src="/assets/js/common.js" defer></script>
</html>
