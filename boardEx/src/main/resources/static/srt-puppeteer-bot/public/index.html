<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRT ìë™ ì˜ˆë§¤ (ì„œë²„ êµ¬ë™)</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: 0 auto; }
        input, select, button { width: 100%; padding: 10px; margin: 5px 0; box-sizing: border-box; }
        button { background-color: #5f0080; color: white; border: none; font-weight: bold; cursor: pointer; }
        button:hover { background-color: #4a0063; }
        .log { background: #f0f0f0; padding: 10px; margin-top: 20px; font-size: 0.9em; min-height: 100px; }
    </style>
</head>
<body>
    <h2>ğŸš„ SRT ìë™ ì˜ˆë§¤ ë´‡</h2>
    <p>ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì„œë²„(ë‚´ ì»´í“¨í„°)ê°€ ëŒ€ì‹  ì˜ˆë§¤ë¥¼ ì‹œë„í•©ë‹ˆë‹¤.</p>

    <input type="text" id="loginId" placeholder="íšŒì›ë²ˆí˜¸ (ìˆ«ì 10ìë¦¬)" required>
    <input type="password" id="loginPw" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
    
    <div style="display: flex; gap: 10px;">
        <input type="text" id="dpt" placeholder="ì¶œë°œì—­ (ì˜ˆ: ìˆ˜ì„œ)" value="ìˆ˜ì„œ">
        <input type="text" id="arv" placeholder="ë„ì°©ì—­ (ì˜ˆ: ë¶€ì‚°)" value="ë¶€ì‚°">
    </div>

    <input type="date" id="date">
    <input type="time" id="time" value="07:00">

    <button id="startBtn">ğŸš€ ì˜ˆë§¤ ì‹œì‘</button>

    <div class="log" id="logArea">ëŒ€ê¸° ì¤‘...</div>

    <script>
        // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë³¸ ì„¸íŒ…
        document.getElementById('date').valueAsDate = new Date();

        document.getElementById('startBtn').addEventListener('click', async () => {
            const data = {
                loginId: document.getElementById('loginId').value,
                loginPw: document.getElementById('loginPw').value,
                dpt: document.getElementById('dpt').value,
                arv: document.getElementById('arv').value,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value
            };

            if(!data.loginId || !data.loginPw) {
                alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const logArea = document.getElementById('logArea');
            logArea.innerText = "ğŸ“¡ ì„œë²„ë¡œ ìš”ì²­ ì „ì†¡ ì¤‘...";

            try {
                const res = await fetch('/api/start', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                
                if(result.status === 'started') {
                    logArea.innerText = `âœ… ìš”ì²­ ì„±ê³µ!\n\nì„œë²„ ì£¼ì¸ì˜ í™”ë©´ì— í¬ë¡¬ì°½ì´ ë–´ëŠ”ì§€ ë¬¼ì–´ë³´ì„¸ìš”.\nì˜ˆë§¤ê°€ ì„±ê³µí•˜ë©´ ì¹´í†¡ì´ë‚˜ ì—°ë½ì´ ê°ˆ ê²ë‹ˆë‹¤.`;
                }
            } catch (err) {
                logArea.innerText = "âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: " + err.message;
            }
        });
    </script>
</body>
</html>